{
  "name": "102-2. CourseMaker-2",
  "nodes": [
    {
      "parameters": {
        "multipleMethods": true,
        "httpMethod": [
          "POST"
        ],
        "path": "course1",
        "responseMode": "responseNode",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      },
      "id": "309372cc-12ce-461d-b8c3-ea17599759d4",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "position": [
        240,
        -96
      ],
      "webhookId": "42b2fd3b-9ec5-4a9f-b5c5-ad7e4b6a43c1",
      "retryOnFail": false,
      "typeVersion": 2.1,
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "5b68513e-8f66-431f-9ddb-db4b180c56df",
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        368,
        144
      ],
      "typeVersion": 1,
      "credentials": {
        "googlePalmApi": {
          "id": "o1pUX0sSSunBHGtz",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json.output }}",
        "options": {
          "responseCode": 200,
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      },
      "id": "d13814d5-9654-4fd0-a703-449782bae35b",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "position": [
        848,
        -96
      ],
      "typeVersion": 1.4
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"course\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"id\": {\n          \"type\": \"string\",\n          \"description\": \"강의 고유 ID\"\n        },\n        \"chapters\": {\n          \"type\": \"array\",\n          \"description\": \"챕터 리스트\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"chapterId\": {\n                \"type\": \"number\",\n                \"description\": \"챕터의 고유 식별자\"\n              },\n              \"chapterTitle\": {\n                \"type\": \"string\",\n                \"description\": \"챕터 제목\"\n              },\n              \"chapterDescription\": {\n                \"type\": \"string\",\n                \"description\": \"챕터 설명\"\n              }\n            },\n            \"required\": [\n              \"chapterId\",\n              \"chapterTitle\",\n              \"chapterDescription\"\n            ]\n          }\n        }\n      },\n      \"required\": [\"id\", \"chapters\"]\n    }\n  },\n  \"required\": [\"course\"]\n}\n"
      },
      "id": "741a15d2-b77a-4d4d-86f9-97133cd60bd3",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        688,
        96
      ],
      "typeVersion": 1.3
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=={{ \"Title: \" + $json.body.courseTitle + \"\\n\" + \"Description: \" + $json.body.courseDescription + \"\\n\" + \"Prompt: \" + $json.body.prompt + \"\\n\" + \"MaxChapters: \" + $json.body.maxchapters + \"\\n\" + \"Links: \" + $json.body.link.join(\", \") + \"\\n\" + \"Difficulty: \" + $json.body.difficulty }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "당신은 JSON 응답 전용 AI입니다.\n\n입력 데이터는:\n{\n\t\"courseTitle\" : string // 제목\n\t\"courseDescription\" : string // 학습 주제\n\t\"prompt\" : string // 본인 제약 상황(프롬프트)\n\t\"maxchapters\" : number // 최대 코스 개수\n\t\"link\" : string[] // 관련 링크 \n\t\"difficulty\": any // 난이도\n}\n형식으로 되어 있어.\n\n작업:\nYou are an expert course designer and curriculum developer, skilled in creating comprehensive and tailored learning experiences. Your task is to generate a customized course syllabus in a structured JSON format. The syllabus should include a unique course ID and a list of chapters, where each chapter has its own ID, title, and description. You must use all provided course details, learner characteristics, maximum units, learning intensity, and any reference materials to create a comprehensive and tailored syllabus.\n# Step by Step instructions\n1. Create a unique Course ID (must be integer) for the syllabus.\n2. Based on the courseTitle, courseDescription, prompts, maxchapters, and difficulty, generate the title and description for the first chapter.\n3. based on link, get information from the URL provided and extract all contents from the page. Return the entire website contents if possible. If there is no URL in link, , do not return error and use Course Description to search the web and get contents from the promising search results.\n3. Assign a unique ID to the chapter.\n4. Check if the number of generated chapters has reached the Max Units. If not, go back to step 2 to generate the next chapter, ensuring progress towards the Max Units.\n5. Combine the Course ID and the list of generated chapters into a single JSON object.\n\n\n응답 형식:\n{\n\t\"course\": {\n\t\t\"id\": number;\n\t\t\"chapters\": [\n\t\t\t{\n\t\t\t\t\"chapterId\" : number\n\t\t\t\t\"chapterTitle\": string\n\t\t\t\t\"chapterDescription\" : string\t\t\t\t\n\t\t\t},\n\t\t\t{\n\t\t\t\t...\n\t\t\t}\n\t\t]\n\t} \n}\n\n규칙:\nYou are working as part of an AI system, so no chit-chat and no explaining what you're doing and why.\nDO NOT start with \"Okay\", or \"Alright\" or any preambles. Just the output, please.\n"
        }
      },
      "id": "2f9741a2-1734-4408-a8d6-028d81f1539c",
      "name": "SyllabusMaker",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        448,
        -96
      ],
      "typeVersion": 3
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "SyllabusMaker",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SyllabusMaker": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "SyllabusMaker",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "SyllabusMaker",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "904a44a7-3324-40ef-bcf8-411fcd7d2ad4",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "80eb4af7e1f0a6b1250e1e59a96c1b5d5d7138f42a94f997f80629b587ebbfc8"
  },
  "id": "jV5rO5srOGrYTJjc",
  "tags": []
}